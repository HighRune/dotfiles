# _______________________________ BASE

font pango:Noto Sans Regular 17
# font pango:Hack Nerd Font 16

# Set the mod key to the winkey
set $mod Mod4

# _______________________________ WINDOWS

bindsym $mod+Return [urgent=latest] focus
bindsym $mod+q kill

# Focus window
# bindsym $mod+Escape focus down
# bindsym $mod+Shift+Escape focus up
bindsym $mod+Tab focus right
bindsym $mod+Shift+Tab focus left

# Move focused window
# bindsym $mod+Shift+Prior move up
# bindsym $mod+Shift+Next  move down
# bindsym $mod+Shift+j move left
# bindsym $mod+Shift+k move right

# toggle mode tiling / floating
bindsym $mod+Shift+space floating toggle

# toggle focus tiling / floating
bindsym $mod+space focus mode_toggle

# Set floating mode for some applications
for_window [class="Yad" instance="yad"] floating enable
for_window [class="Galculator" instance="galculator"] floating enable
for_window [class="Blueberry.py" instance="blueberry.py"] floating enable
for_window [class="Xsane" instance="xsane"] floating enable
for_window [class="Pavucontrol" instance="pavucontrol"] floating enable
for_window [class="qt5ct" instance="qt5ct"] floating enable
for_window [class="Blueberry.py" instance="blueberry.py"] floating enable
for_window [class="Bluetooth-sendto" instance="bluetooth-sendto"] floating enable
for_window [class="Pamac-manager"] floating enable

default_border none
title_align center
floating_modifier $mod
focus_on_window_activation focus

# _______________________________ CONTAINERS

bindsym $mod+h split h
bindsym $mod+v split v

# _______________________________ WORKSPACES

# Move workspace to next monitor
bindsym $mod+0 exec i3-msg move workspace to output next

# Switch to workspace
bindsym $mod+1    workspace  $ws1
bindsym $mod+2    workspace  $ws2
bindsym $mod+3    workspace  $ws3
bindsym $mod+4    workspace  $ws4
bindsym $mod+5    workspace  $ws5
bindsym $mod+6    workspace  $ws6
bindsym $mod+7    workspace  $ws7
bindsym $mod+8    workspace  $ws8
bindsym $mod+9    workspace  $ws9

# Move focused container to workspace
bindsym $mod+Shift+1    move container to workspace  $ws1; workspace  $ws1;
bindsym $mod+Shift+2    move container to workspace  $ws2; workspace  $ws2;
bindsym $mod+Shift+3    move container to workspace  $ws3; workspace  $ws3;
bindsym $mod+Shift+4    move container to workspace  $ws4; workspace  $ws4;
bindsym $mod+Shift+5    move container to workspace  $ws5; workspace  $ws5;
bindsym $mod+Shift+6    move container to workspace  $ws6; workspace  $ws6;
bindsym $mod+Shift+7    move container to workspace  $ws7; workspace  $ws7;
bindsym $mod+Shift+8    move container to workspace  $ws8; workspace  $ws8;
bindsym $mod+Shift+9    move container to workspace  $ws9; workspace  $ws9;

# Set workspaces names
set $ws1 "1:1"
set $ws2 "2:2"
set $ws3 "3:3"
set $ws4 "4:4"
set $ws5 "1:5"
set $ws6 "2:6"
set $ws7 "3:7"
set $ws8 "4:8"
set $ws9 "4:9"

# _______________________________ KEYBINDINGS

bindsym $mod+r reload
# bindsym $mod+l exec i3lock -i  ~/.config/i3/i3-lock-screen.png -p default|win -t
# bindsym $mod+l exec ~/.config/i3/scripts/blur-lock.sh

bindsym $mod+e exec (i3-msg [class="Alacritty"] focus | grep true) || exec alacritty
bindsym $mod+u exec (i3-msg [class="Google-chrome"] focus | grep true) || exec google-chrome-stable
bindsym $mod+i exec (i3-msg [class="slack"] focus | grep true) || exec slack
bindsym $mod+a exec (i3-msg [class="thunar"] focus | grep true) || exec thunar

bindsym $mod+Shift+e exec alacritty
bindsym $mod+Shift+u exec google-chrome-stable

# Rofi application menu
bindsym $mod+d exec rofi -modi drun -show drun -config ~/.config/rofi/rofidmenu.rasi
bindsym F9 exec rofi -modi drun -show drun -config ~/.config/rofi/rofidmenu.rasi
# Rofi window menu
bindsym $mod+t exec rofi -show window -config ~/.config/rofi/rofidmenu.rasi 
bindsym F10 exec rofi -show window -config ~/.config/rofi/rofidmenu.rasi 

# _______________________________ MULTIMEDIA

bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
# bindsym $mod+space exec playerctl play-pause
# bindsym $mod+n exec playerctl next
# bindsym $mod+p exec playerctl previous
# bindsym $mod+j exec playerctl position 5+
# bindsym $mod+l exec playerctl position 5-

# bindsym XF86MonBrightnessUp exec xbacklight +10
# bindsym XF86MonBrightnessDown exec xbacklight -10
bindsym $mod+Right exec xbacklight +3
bindsym $mod+Left exec xbacklight -3

bindsym XF86AudioRaiseVolume exec amixer -D pulse sset Master 5%+
bindsym XF86AudioLowerVolume exec amixer -D pulse sset Master 5%-
bindsym $mod+Up exec amixer -D pulse sset Master 5%+
bindsym $mod+Down exec amixer -D pulse sset Master 5%-

# Mute
bindsym XF86AudioMute exec pamixer -t && notify-send "mute: $(pamixer --get-mute)"
# bindsym XF86AudioMute exec amixer sset Master toggle && killall -USR1 i3blocks

# Pulse Audio controls
# Volume up
# bindsym XF86AudioRaiseVolume exec pamixer -i 5 --allow-boost && dunstify -h string:x-dunst-stack-tag:volume volume: $(pamixer --get-volume)%
# Volume down
# bindsym XF86AudioLowerVolume exec pamixer -d 5 --allow-boost && dunstify -h string:x-dunst-stack-tag:volume volume: $(pamixer --get-volume)%
# Mute
# bindsym XF86AudioMute exec pamixer -t && dunstify -h string:x-dunst-stack-tag:mute mute: $(pamixer --get-mute)!

# _______________________________ AUTOSTART

# Get auth work with polkit-gnome
   exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# dex execute .desktop files
# keep in mind that it can cause issues 
# when second to i3 a DE is installed or mixed usage of i3 + xfce4 or GNOME
# in this cases better disable dex and use manual starting apps using xdg/autostart
# exec --no-startup-id dex -a -s /etc/xdg/autostart/:~/.config/autostart/

# num lock activated
# exec --no-startup-id numlockx on

# Start conky: 
# exec_always --no-startup-id conky

# Start a script to setup displays
# Uncomment the next line, use arandr to setup displays and save the file as monitor:
   exec --no-startup-id ~/.screenlayout/monitor.sh

# Start blueberry app for managing bluetooth devices from tray:
   exec --no-startup-id blueberry-tray

# bindsym Print exec "scrot ~/Downloads/%Y-%m-%d-%T-screenshot.png"
   bindsym $mod+Shift++ exec "flameshot gui -p ~/Downloads"
   bindsym $mod++ exec "flameshot full -p ~/Downloads"


# Transparency 
# exec --no-startup-id xcompmgr -c -C -t-5 -l-5 -r4.2 -o.55 &
# exec --no-startup-id picom CGb
   exec --no-startup-id picom --experimental-backends

# Networkmanager-applet
   exec --no-startup-id nm-applet


   set $wallpaper ~/.config/Skin\ The\ Remixes.png
# Set wallpaper
# exec --no-startup-id nitrogen --restore
   exec --no-startup-id feh --bg-fill $wallpaper 

# Set powersavings for display:
# exec --no-startup-id xset s 480 dpms 600 600 600

# Desktop notifications
   exec --no-startup-id dbus-launch dunst --config ~/.config/dunst/dunstrc

# _______________________________ STYLE

# Colors
   set $darktrans      #00000096
   set $transparent    #00000000
   set $darkbluetrans  #08052be6
   set $darkblue       #08052b
   set $lightblue      #5294e2
   set $urgentred      #e53935
   set $white          #ffffff
   set $black          #000000
   set $purple         #e345ff
   set $darkgrey       #383c4a
   set $grey           #b0b5bd
   set $mediumgrey     #8b8b8b
   set $yellowbrown    #e1b700

# Windows color
#                       $BORDER    $BGROUND   $TEXT  $INDICATOR
   client.focused             $transparent  $transparent  $white $purple
   client.unfocused           $transparent  $transparent  $grey  $purple
   client.focused_inactive    $transparent  $transparent  $grey  $purple
   client.urgent              $lightblue    $transparent  $white $purple

   bar {
           # status_command i3blocks -c ~/.config/i3/i3blocks.conf
           i3bar_command i3bar --transparency
           status_command i3status
           position top 
           workspace_min_width 30
           tray_output primary
           tray_padding 0
           strip_workspace_numbers yes

           colors {
               background         $transparent
               statusline         $grey
               # Workspaces colors
               #                  $border    $bg       $txt   $indicator
               focused_workspace  $transparent  $transparent $white $purple
               inactive_workspace $transparent  $transparent $grey  $purple
               urgent_workspace   $lightblue    $transparent $white $purple
           }
   }
